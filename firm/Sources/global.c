#include "global.h"

// The arrays where the pixel data is stored,
// array0 stores the MSB
// array1 stores the next bit
#define n0 0x24
#define n1 0x92
#define n2 0x49
#define R n0,n1,n2
#define G n2,n0,n1
#define B n1,n2,n0
#define A n0|n2, n1|n0, n2|n1
#define C n2|n1, n0|n2, n1|n0
#define V n1|n0, n2|n1, n0|n2
uchar MX_pixelArray0[MX_MAX_WIDTH][MX_MAX_HEIGHT*3/2/8] = {
{},
{R,R,R,R},
{G,G,G,G},
{B,B,B,B}
/*
{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},		
{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00}, // B
{0xff,0xff,0xff,0xff,0xff,0xff,0x00,0x00,0x00,0x00,0x00,0x00},
{0xff,0xff,0xff,0xff,0xff,0xff,0x00,0x00,0x00,0x00,0x00,0x00},
{0xff,0xff,0xff,0xff,0xff,0xff,0x00,0x00,0x00,0x00,0x00,0x00},
{0xff,0xff,0xff,0xff,0xff,0xff,0x00,0x00,0x00,0x00,0x00,0x00},
{0xfc,0x00,0x3f,0xfc,0x00,0x3f,0x00,0x00,0x00,0x00,0x00,0x00},
{0xfc,0x00,0x3f,0xfc,0x00,0x3f,0x00,0x00,0x00,0x00,0x00,0x00},
{0xfc,0x00,0x3f,0xfc,0x00,0x3f,0x00,0x00,0x00,0x00,0x00,0x00},
{0xfc,0x00,0x3f,0xfc,0x00,0x3f,0x00,0x00,0x00,0x00,0x00,0x00},
{0xfc,0x00,0x3f,0xfc,0x00,0x3f,0x00,0x00,0x00,0x00,0x00,0x00},
{0xfc,0x00,0x3f,0xfc,0x00,0x3f,0x00,0x00,0x00,0x00,0x00,0x00},
{0x03,0xff,0xc0,0x03,0xff,0xc0,0x00,0x00,0x00,0x00,0x00,0x00},
{0x03,0xff,0xc0,0x03,0xff,0xc0,0x00,0x00,0x00,0x00,0x00,0x00},
{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},

{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00}, // A
{0x00,0x00,0x00,0xff,0xff,0xff},
{0x00,0x00,0x00,0xff,0xff,0xff},
{0x00,0xef,0xff,0x00,0x00,0x00},
{0x00,0xef,0xff,0x00,0x00,0x00},
{0xff,0x10,0x3f,0x00,0x00,0x00},
{0xff,0x10,0x3f,0x00,0x00,0x00},
{0xff,0x10,0x3f,0x00,0x00,0x00},
{0xff,0x10,0x3f,0x00,0x00,0x00},
{0xff,0x10,0x3f,0x00,0x00,0x00},
{0xff,0x10,0x3f,0x00,0x00,0x00},
{0x00,0xef,0xff,0x00,0x00,0x00},
{0x00,0xef,0xff,0x00,0x00,0x00},
{0x00,0x00,0x00,0xff,0xff,0xff},
{0x00,0x00,0x00,0xff,0xff,0xff},
{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},

{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},	// I
{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
{0xff,0xff,0xff,0xff,0xff,0xff,0x00,0x00,0x00,0x00,0x00,0x00},
{0xff,0xff,0xff,0xff,0xff,0xff,0x00,0x00,0x00,0x00,0x00,0x00},
{0xff,0xff,0xff,0xff,0xff,0xff,0x00,0x00,0x00,0x00,0x00,0x00},
{0xff,0xff,0xff,0xff,0xff,0xff,0x00,0x00,0x00,0x00,0x00,0x00},
{0xff,0xff,0xff,0xff,0xff,0xff,0x00,0x00,0x00,0x00,0x00,0x00},
{0xff,0xff,0xff,0xff,0xff,0xff,0x00,0x00,0x00,0x00,0x00,0x00},
{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},

{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00}, // L
{0xff,0xff,0xff,0xff,0xff,0xff},
{0xff,0xff,0xff,0xff,0xff,0xff},
{0xff,0xff,0xff,0xff,0xff,0xff},
{0x00,0x00,0x00,0x00,0xff,0xff},
{0x00,0x00,0x00,0x00,0xff,0xff},
{0x00,0x00,0x00,0x00,0xff,0xff},
{0x00,0x00,0x00,0x00,0xff,0xff},
{0x00,0x00,0x00,0x00,0xff,0xff},
{0x00,0x00,0x00,0x00,0xff,0xff},
{0x00,0x00,0x00,0x00,0xff,0xff},
{0x00,0x00,0x00,0x00,0xff,0xff},
{0x00,0x00,0x00,0x00,0xff,0xff},
{0x00,0x00,0x00,0x00,0xff,0xff},
{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},

{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},		
{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00}, // E
{0xff,0xff,0xff,0xff,0xff,0xff,0x00,0x00,0x00,0x00,0x00,0x00},
{0xff,0xff,0xff,0xff,0xff,0xff,0x00,0x00,0x00,0x00,0x00,0x00},
{0xff,0xff,0xff,0xff,0xff,0xff,0x00,0x00,0x00,0x00,0x00,0x00},
{0xff,0xff,0xff,0xff,0xff,0xff,0x00,0x00,0x00,0x00,0x00,0x00},
{0xfc,0x00,0x3f,0xfc,0x00,0x3f,0x00,0x00,0x00,0x00,0x00,0x00},
{0xfc,0x00,0x3f,0xfc,0x00,0x3f,0x00,0x00,0x00,0x00,0x00,0x00},
{0xfc,0x00,0x3f,0xfc,0x00,0x3f,0x00,0x00,0x00,0x00,0x00,0x00},
{0xfc,0x00,0x3f,0xfc,0x00,0x3f,0x00,0x00,0x00,0x00,0x00,0x00},
{0xfc,0x00,0x3f,0xfc,0x00,0x3f,0x00,0x00,0x00,0x00,0x00,0x00},
{0xfc,0x00,0x3f,0xfc,0x00,0x3f,0x00,0x00,0x00,0x00,0x00,0x00},
{0xfc,0x00,0x3f,0xfc,0x00,0x3f,0x00,0x00,0x00,0x00,0x00,0x00},
{0xfc,0x00,0x3f,0xfc,0x00,0x3f,0x00,0x00,0x00,0x00,0x00,0x00},
{0xfc,0x00,0x3f,0xfc,0x00,0x3f,0x00,0x00,0x00,0x00,0x00,0x00},
{0xfc,0x00,0x00,0x00,0x00,0x3f,0x00,0x00,0x00,0x00,0x00,0x00},
{0xfc,0x00,0x00,0x00,0x00,0x3f,0x00,0x00,0x00,0x00,0x00,0x00},
{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
		

{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},


{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00}, // P
{0xff,0xff,0xff,0xff,0xff,0xff,0x00,0x00,0x00,0x00,0x00,0x00},
{0xff,0xff,0xff,0xff,0xff,0xff,0x00,0x00,0x00,0x00,0x00,0x00},
{0xff,0xff,0xff,0xff,0xff,0xff,0x00,0x00,0x00,0x00,0x00,0x00},
{0xff,0xff,0xff,0xff,0xff,0xff,0x00,0x00,0x00,0x00,0x00,0x00},
{0xfc,0x00,0x3f,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
{0xfc,0x00,0x3f,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
{0xfc,0x00,0x3f,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
{0xfc,0x00,0x3f,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
{0xfc,0x00,0x3f,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
{0xfc,0x00,0x3f,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
{0x03,0xff,0xc0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
{0x03,0xff,0xc0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},

{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},	// I
{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
{0xff,0xff,0xff,0xff,0xff,0xff,0x00,0x00,0x00,0x00,0x00,0x00},
{0xff,0xff,0xff,0xff,0xff,0xff,0x00,0x00,0x00,0x00,0x00,0x00},
{0xff,0xff,0xff,0xff,0xff,0xff,0x00,0x00,0x00,0x00,0x00,0x00},
{0xff,0xff,0xff,0xff,0xff,0xff,0x00,0x00,0x00,0x00,0x00,0x00},
{0xff,0xff,0xff,0xff,0xff,0xff,0x00,0x00,0x00,0x00,0x00,0x00},
{0xff,0xff,0xff,0xff,0xff,0xff,0x00,0x00,0x00,0x00,0x00,0x00},
{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},

{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00}, // O
{0xff,0xff,0xff,0xff,0xff,0xff,0x00,0x00,0x00,0x00,0x00,0x00},
{0xff,0xff,0xff,0xff,0xff,0xff,0x00,0x00,0x00,0x00,0x00,0x00},
{0xff,0xff,0xff,0xff,0xff,0xff,0x00,0x00,0x00,0x00,0x00,0x00},
{0x90,0x00,0x00,0x00,0x00,0x09,0x00,0x00,0x00,0x00,0x00,0x00},
{0x90,0x00,0x00,0x00,0x00,0x09,0x00,0x00,0x00,0x00,0x00,0x00},
{0x90,0x00,0x00,0x00,0x00,0x09,0x00,0x00,0x00,0x00,0x00,0x00},
{0x90,0x00,0x00,0x00,0x00,0x09,0x00,0x00,0x00,0x00,0x00,0x00},
{0x90,0x00,0x00,0x00,0x00,0x09,0x00,0x00,0x00,0x00,0x00,0x00},
{0x90,0x00,0x00,0x00,0x00,0x09,0x00,0x00,0x00,0x00,0x00,0x00},
{0x90,0x00,0x00,0x00,0x00,0x09,0x00,0x00,0x00,0x00,0x00,0x00},
{0x90,0x00,0x00,0x00,0x00,0x09,0x00,0x00,0x00,0x00,0x00,0x00},
{0x90,0x00,0x00,0x00,0x00,0x09,0x00,0x00,0x00,0x00,0x00,0x00},
{0x90,0x00,0x00,0x00,0x00,0x09,0x00,0x00,0x00,0x00,0x00,0x00},
{0x90,0x00,0x00,0x00,0x00,0x09,0x00,0x00,0x00,0x00,0x00,0x00},
{0xff,0xff,0xff,0xff,0xff,0xff,0x00,0x00,0x00,0x00,0x00,0x00},
{0xff,0xff,0xff,0xff,0xff,0xff,0x00,0x00,0x00,0x00,0x00,0x00},
{0xff,0xff,0xff,0xff,0xff,0xff,0x00,0x00,0x00,0x00,0x00,0x00},
{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},

{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},	// !
{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
{0xff,0xff,0xff,0xfc,0x00,0x3f,0x00,0x00,0x00,0x00,0x00,0x00},
{0xff,0xff,0xff,0xfc,0x00,0x3f,0x00,0x00,0x00,0x00,0x00,0x00},
{0xff,0xff,0xff,0xfc,0x00,0x3f,0x00,0x00,0x00,0x00,0x00,0x00},
{0xff,0xff,0xff,0xfc,0x00,0x3f,0x00,0x00,0x00,0x00,0x00,0x00},
{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00}
*/
/*
{R,R,R,R},
{G,G,G,G},
{B,B,B,B},
{R,G,R,G},
{G,B,G,B},
{B,R,B,R},
{A,A,A,A},
{C,C,C,C},
{V,V,V,V},
{A,C,A,C},
{C,V,C,V},
{V,A,V,A},
{R,A,R,A},
{G,C,G,C},
{B,V,B,V},
{R,C,R,C},
{G,V,G,V},
{B,A,B,A},
{R,V,R,V},
{G,A,G,A},
{B,C,B,C},
{R,R,R,R},
{G,G,G,G},
{B,B,B,B},
{R,G,R,G},
{G,B,G,B},
{B,R,B,R},
{A,A,A,A},
{C,C,C,C},
{V,V,V,V},
{A,C,A,C},
{C,V,C,V},
{V,A,V,A},
{R,A,R,A},
{G,C,G,C},
{B,V,B,V},
{R,C,R,C},
{G,V,G,V},
{B,A,B,A},
{R,V,R,V},
{G,A,G,A},
{B,C,B,C}
*/
};

uchar MX_pixelArray1[MX_MAX_WIDTH][MX_MAX_HEIGHT*3/2/8];
#undef n0
#undef n1
#undef n2
#undef R
#undef G
#undef B
#undef A
#undef C
#undef V

// Matrix status
uint MX_height = 32;
uint MX_width = 480;
//uint MX_width = MX_MAX_WIDTH;
uchar MX_depth = 1;                  // Color-depth, in bits
uint MX_offset = 0;
uint MX_totalWidth = MX_MAX_WIDTH;  // Number of pixels
                                    // the complete perimeter would occupy

// Rotational speed variables
uint FPS_clockMod_real = 0x0f47;
//uint FPS_clockMod_actual = 0xF000; // Testing
uint FPS_clockMod_actual = 0x0f47;
//uint FPS_clockMod_actual = 0x2000;

// Id
uchar ID = 0;

// Led
uint LED_column = 0;
uchar LED_subcolumn = 0;
uchar LED_columnByte = 0;
uint LED_bytesPerCol = 12;
uchar LED_enabled = 0;
uchar LED_dimm = 0;
uchar LED_dimm_state = 0;

// Debugging
uchar DEBUG;
